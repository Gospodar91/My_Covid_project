{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\React\\\\covid_project\\\\covid_projest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import SearchForm from\"./SearchForm\";import{operations}from\"../operations/Operations\";import css from\"./searchForm.module.css\";import LatestNews from\"../LatestNews/LatestNews\";import{SearchFormResult}from\"./SearchFormResult\";var SearhPage=/*#__PURE__*/function(_Component){_inherits(SearhPage,_Component);function SearhPage(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearhPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearhPage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={searchQuery:null,searchinfo:null,flagQuery:null,newsData:null};_this.getQueryonSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return _this.setState({searchQuery:e.target.elements[0].value});case 3:_context.next=5;return operations.getSummary().then(function(data){return _this.setState({searchinfo:data.data.Countries.find(function(country){return country.Country.toLowerCase()===_this.state.searchQuery.toLowerCase();})});});case 5:_context.next=7;return operations.getFlag(_this.state.searchQuery).then(function(data){return _this.setState({flagQuery:data.data.hits});});case 7:_context.next=9;return operations.getSearchnews(_this.state.searchQuery).then(function(data){return _this.setState({newsData:data.data.articles,searchQuery:\"\"});});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SearhPage,[{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));function componentDidUpdate(_x2,_x3){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){console.log('this.state.searchQuery',this.state.searchQuery);var _this$state=this.state,searchinfo=_this$state.searchinfo,flagQuery=_this$state.flagQuery;return React.createElement(React.Fragment,null,React.createElement(SearchForm,{getQueryonSubmit:this.getQueryonSubmit}),React.createElement(SearchFormResult,{searchinfo:searchinfo,flagQuery:flagQuery}),React.createElement(LatestNews,{newsData:this.state.newsData}));}}]);return SearhPage;}(Component);export default SearhPage;","map":{"version":3,"sources":["E:/React/covid_project/covid_projest/src/components/covid19/Searchform/SearchPage.js"],"names":["React","Component","SearchForm","operations","css","LatestNews","SearchFormResult","SearhPage","state","searchQuery","searchinfo","flagQuery","newsData","getQueryonSubmit","e","preventDefault","setState","target","elements","value","getSummary","then","data","Countries","find","country","Country","toLowerCase","getFlag","hits","getSearchnews","articles","prevProps","prevState","console","log"],"mappings":"s3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,GAAP,KAAgB,yBAAhB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,gBAAT,KAAiC,oBAAjC,C,GAEMC,CAAAA,S,2YACJC,K,CAAQ,CACNC,WAAW,CAAE,IADP,CAENC,UAAU,CAAE,IAFN,CAGNC,SAAS,CAAE,IAHL,CAINC,QAAQ,CAAE,IAJJ,C,OAiCRC,gB,0FAAmB,iBAAOC,CAAP,kHACjBA,CAAC,CAACC,cAAF,GADiB,sBAEX,OAAKC,QAAL,CAAc,CAClBP,WAAW,CAAEK,CAAC,CAACG,MAAF,CAASC,QAAT,CAAkB,CAAlB,EAAqBC,KADhB,CAAd,CAFW,8BAKPhB,CAAAA,UAAU,CAACiB,UAAX,GAAwBC,IAAxB,CAA6B,SAACC,IAAD,QACnC,OAAKN,QAAL,CAAc,CACZN,UAAU,CAAEY,IAAI,CAACA,IAAL,CAAUC,SAAV,CAAoBC,IAApB,CACV,SAACC,OAAD,QACEA,CAAAA,OAAO,CAACC,OAAR,CAAgBC,WAAhB,KACA,MAAKnB,KAAL,CAAWC,WAAX,CAAuBkB,WAAvB,EAFF,EADU,CADA,CAAd,CADmC,EAA7B,CALO,8BAeTxB,CAAAA,UAAU,CACbyB,OADG,CACK,MAAKpB,KAAL,CAAWC,WADhB,EAEHY,IAFG,CAEE,SAACC,IAAD,QAAU,OAAKN,QAAL,CAAc,CAAEL,SAAS,CAAEW,IAAI,CAACA,IAAL,CAAUO,IAAvB,CAAd,CAAV,EAFF,CAfS,8BAmBT1B,CAAAA,UAAU,CACb2B,aADG,CACW,MAAKtB,KAAL,CAAWC,WADtB,EAEHY,IAFG,CAEE,SAACC,IAAD,QAAU,OAAKN,QAAL,CAAc,CAAEJ,QAAQ,CAAEU,IAAI,CAACA,IAAL,CAAUS,QAAtB,CAA+BtB,WAAW,CAAC,EAA3C,CAAd,CAAV,EAFF,CAnBS,uD,kPAxBMuB,S,CAAWC,S,qUAgD3B,CACPC,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsC,KAAK3B,KAAL,CAAWC,WAAjD,EADO,gBAE2B,KAAKD,KAFhC,CAECE,UAFD,aAECA,UAFD,CAEaC,SAFb,aAEaA,SAFb,CAGP,MAEE,yCACE,oBAAC,UAAD,EAAY,gBAAgB,CAAE,KAAKE,gBAAnC,EADF,CAEE,oBAAC,gBAAD,EAAkB,UAAU,CAAEH,UAA9B,CAA0C,SAAS,CAAEC,SAArD,EAFF,CAGE,oBAAC,UAAD,EAAY,QAAQ,CAAE,KAAKH,KAAL,CAAWI,QAAjC,EAHF,CAFF,CASD,C,uBAtEqBX,S,EAwExB,cAAeM,CAAAA,SAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport SearchForm from \"./SearchForm\";\r\nimport { operations } from \"../operations/Operations\";\r\nimport css from \"./searchForm.module.css\";\r\nimport LatestNews from \"../LatestNews/LatestNews\";\r\nimport { SearchFormResult } from \"./SearchFormResult\";\r\n\r\nclass SearhPage extends Component {\r\n  state = {\r\n    searchQuery: null,\r\n    searchinfo: null,\r\n    flagQuery: null,\r\n    newsData: null,\r\n  };\r\n\r\n \r\n  \r\n  async componentDidUpdate(prevProps, prevState) {\r\n    // if (prevState.searchQuery !== this.state.searchQuery) {\r\n    //   await operations.getSummary().then((data) =>\r\n    //     this.setState({\r\n    //       searchinfo: data.data.Countries.find(\r\n    //         (country) =>\r\n    //           country.Country.toLowerCase() ===\r\n    //           this.state.searchQuery.toLowerCase()\r\n    //       ),\r\n    //     })\r\n    //   );\r\n\r\n    //   await operations\r\n    //     .getFlag(this.state.searchQuery)\r\n    //     .then((data) => this.setState({ flagQuery: data.data.hits }));\r\n\r\n    //   await operations\r\n    //     .getSearchnews(this.state.searchQuery)\r\n    //     .then((data) => this.setState({ newsData: data.data.articles }));\r\n      \r\n    //   }\r\n    }\r\n \r\n\r\n  getQueryonSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await this.setState({\r\n      searchQuery: e.target.elements[0].value,\r\n    });\r\n        await operations.getSummary().then((data) =>\r\n        this.setState({\r\n          searchinfo: data.data.Countries.find(\r\n            (country) =>\r\n              country.Country.toLowerCase() ===\r\n              this.state.searchQuery.toLowerCase()\r\n          ),\r\n        })\r\n      );\r\n\r\n      await operations\r\n        .getFlag(this.state.searchQuery)\r\n        .then((data) => this.setState({ flagQuery: data.data.hits }));\r\n\r\n      await operations\r\n        .getSearchnews(this.state.searchQuery)\r\n        .then((data) => this.setState({ newsData: data.data.articles,searchQuery:\"\" }));\r\n       \r\n  };\r\n  render() {\r\n    console.log('this.state.searchQuery', this.state.searchQuery)\r\n    const { searchinfo, flagQuery } = this.state;\r\n    return (\r\n    \r\n      <>\r\n        <SearchForm getQueryonSubmit={this.getQueryonSubmit} />\r\n        <SearchFormResult searchinfo={searchinfo} flagQuery={flagQuery} />\r\n        <LatestNews newsData={this.state.newsData} />\r\n      </>\r\n      \r\n    );\r\n  }\r\n}\r\nexport default SearhPage"]},"metadata":{},"sourceType":"module"}